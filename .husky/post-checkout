#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Only run on branch checkouts (not file checkouts)
if [ $3 = 1 ]; then
  echo "ğŸ”„ Branch checkout detected..."
  
  # Check if package.json changed
  if git diff --name-only HEAD@{1} HEAD | grep -q "package\.json\|package-lock\.json"; then
    echo "ğŸ“¦ Dependencies may have changed. Consider running:"
    echo "   npm install"
  fi
  
  # Check if database schema changed
  if git diff --name-only HEAD@{1} HEAD | grep -q "prisma/schema\.prisma"; then
    echo "ğŸ—„ï¸  Database schema may have changed. Consider running:"
    echo "   npm run db:generate"
    echo "   npm run db:migrate"
  fi
fi