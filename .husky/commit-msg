#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "📝 Validating commit message..."

# Run commitlint
npx --no-install commitlint --edit $1

if [ $? -ne 0 ]; then
  echo "❌ Commit message format is invalid!"
  echo ""
  echo "📋 Commit message should follow conventional commits format:"
  echo "   <type>(<scope>): <description>"
  echo ""
  echo "🏷️  Valid types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
  echo ""
  echo "💡 Examples:"
  echo "   feat(auth): add user login functionality"
  echo "   fix(api): resolve null pointer exception in user service"  
  echo "   docs: update README with installation instructions"
  echo "   test(auth): add unit tests for login validation"
  echo ""
  exit 1
fi

echo "✅ Commit message is valid!"