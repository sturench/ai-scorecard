#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ“ Validating commit message..."

# Run commitlint
npx --no-install commitlint --edit $1

if [ $? -ne 0 ]; then
  echo "âŒ Commit message format is invalid!"
  echo ""
  echo "ğŸ“‹ Commit message should follow conventional commits format:"
  echo "   <type>(<scope>): <description>"
  echo ""
  echo "ğŸ·ï¸  Valid types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
  echo ""
  echo "ğŸ’¡ Examples:"
  echo "   feat(auth): add user login functionality"
  echo "   fix(api): resolve null pointer exception in user service"  
  echo "   docs: update README with installation instructions"
  echo "   test(auth): add unit tests for login validation"
  echo ""
  exit 1
fi

echo "âœ… Commit message is valid!"